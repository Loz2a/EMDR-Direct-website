<!DOCTYPE html>
<html class="no-js" <?php language_attributes(); ?>>
    
    <?php get_header(); ?>

    <body <?php body_class(); ?>>
        
        <main>
            <section class="newsIntro">
                <div class="bg"></div>
                <img class="topLeftBG reveal" src="<?php echo get_template_directory_uri(); ?>/images/openTopBG.jpg" alt="Open Minds - Open Green Energy">
                <div class="wrapper">
                    <div class="textWrapper">
                        <h1 class="reveal">Open Minds</h1>
                        <div class="searchBox reveal" id="searchBox">
                            <?php get_search_form(); ?>
                        </div>
                        <div class="description reveal">
                            <?php the_field('intro', 19); ?>
                        </div>
                    </div>
                    <div class="downWrapper simpleActive">
                        <a class="smooth goingDown reveal" href="#down">
                            <svg class="downArrow" xmlns="http://www.w3.org/2000/svg" width="14.212" height="13.985" viewBox="0 0 14.212 13.985"><g transform="translate(-784.215 -694.253)"><path d="M0,0,6.753,6.753,0,13.505" transform="translate(798.074 700.778) rotate(90)" fill="none" stroke="#ffffff" stroke-width="1"/><path d="M0,0,6.753,6.753,0,13.505" transform="translate(798.074 694.607) rotate(90)" fill="none" stroke="#ffffff" stroke-width="1"/></g></svg>
                        </a>
                    </div>
                </div>

                <svg class="topRight" id="eauwxz46zko1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 368 63" shape-rendering="geometricPrecision" text-rendering="geometricPrecision"><g id="eauwxz46zko2_to" transform="translate(-2,541)"><g id="eauwxz46zko2" transform="rotate(-90) translate(0,0)" opacity="0.505"><circle id="eauwxz46zko3" r="20" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="none" stroke-width="1"/><circle id="eauwxz46zko4" r="19.500000" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="rgb(255,255,255)" stroke-width="1"/></g></g><g id="eauwxz46zko5_to" transform="translate(-17,541)"><g id="eauwxz46zko5" transform="rotate(-90) translate(0,0)" opacity="0.505"><circle id="eauwxz46zko6" r="20" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="none" stroke-width="1"/><circle id="eauwxz46zko7" r="19.500000" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="rgb(255,255,255)" stroke-width="1"/></g></g><g id="eauwxz46zko8_to" transform="translate(-62,541)"><g id="eauwxz46zko8" transform="rotate(-90) translate(0,0)" opacity="0.505"><circle id="eauwxz46zko9" r="20" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="none" stroke-width="1"/><circle id="eauwxz46zko10" r="19.500000" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="rgb(255,255,255)" stroke-width="1"/></g></g><g id="eauwxz46zko11_to" transform="translate(-107,541)"><g id="eauwxz46zko11" transform="rotate(-90) translate(0,0)" opacity="0.505"><circle id="eauwxz46zko12" r="20" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="none" stroke-width="1"/><circle id="eauwxz46zko13" r="19.500000" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="rgb(255,255,255)" stroke-width="1"/></g></g><g id="eauwxz46zko14_to" transform="translate(-134,541)"><g id="eauwxz46zko14" transform="rotate(-90) translate(0,0)" opacity="0.505"><circle id="eauwxz46zko15" r="20" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="none" stroke-width="1"/><circle id="eauwxz46zko16" r="19.500000" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="rgb(255,255,255)" stroke-width="1"/></g></g><g id="eauwxz46zko17_to" transform="translate(113,501)"><g id="eauwxz46zko17" transform="translate(0,0)" opacity="0.505"><circle id="eauwxz46zko18" r="20" transform="matrix(1 0 0 1 194.90000000000001 -468.30000000000001)" fill="none" stroke="none" stroke-width="1"/><circle id="eauwxz46zko19" r="19.500000" transform="matrix(1 0 0 1 194.90000000000001 -468.30000000000001)" fill="none" stroke="rgb(255,255,255)" stroke-width="1"/></g></g></svg>

                <svg class="bottomRight" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56.59 56.59"><defs><style>.cls-1,.cls-2{fill:none;stroke:#fff;stroke-width:0.5px;}.cls-1{stroke-miterlimit:10;}</style></defs><g id="Ellipse_600" data-name="Ellipse 600"><ellipse class="cls-1" cx="28.29" cy="14.79" rx="13.5" ry="13"/><ellipse class="cls-2" cx="28.29" cy="14.79" rx="13" ry="12.5"/></g><g id="Ellipse_602" data-name="Ellipse 602"><circle class="cls-1" cx="28.29" cy="41.29" r="13.5"/><circle class="cls-2" cx="28.29" cy="41.29" r="13"/></g><g id="Ellipse_603" data-name="Ellipse 603"><circle class="cls-1" cx="15.29" cy="28.29" r="13.5"/><circle class="cls-2" cx="15.29" cy="28.29" r="13"/></g><g id="Ellipse_604" data-name="Ellipse 604"><ellipse class="cls-1" cx="41.79" cy="28.29" rx="13" ry="13.5"/><ellipse class="cls-2" cx="41.79" cy="28.29" rx="12.5" ry="13"/></g></svg>

                <svg class="middleLeft" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50.38 52.08"><defs><style>.cls-1,.cls-2{fill:none;stroke:#fff;stroke-width:0.5px;}.cls-1{stroke-miterlimit:10;}</style></defs><g id="Ellipse_597" data-name="Ellipse 597"><circle class="cls-1" cx="18.05" cy="33.97" r="15.86"/><circle class="cls-2" cx="18.05" cy="33.97" r="15.47"/></g><g id="Ellipse_598" data-name="Ellipse 598"><circle class="cls-1" cx="18.05" cy="18.11" r="15.86"/><circle class="cls-2" cx="18.05" cy="18.11" r="15.47"/></g><g id="Ellipse_599" data-name="Ellipse 599"><circle class="cls-1" cx="32.33" cy="26.04" r="15.86"/><circle class="cls-2" cx="32.33" cy="26.04" r="15.47"/></g></svg>


                <svg class="bottomLeft" id="eauwxz46zko1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 368 63" shape-rendering="geometricPrecision" text-rendering="geometricPrecision"><g id="eauwxz46zko2_to" transform="translate(-2,541)"><g id="eauwxz46zko2" transform="rotate(-90) translate(0,0)" opacity="0.505"><circle id="eauwxz46zko3" r="20" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="none" stroke-width="1"/><circle id="eauwxz46zko4" r="19.500000" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="rgb(255,255,255)" stroke-width="1"/></g></g><g id="eauwxz46zko5_to" transform="translate(-17,541)"><g id="eauwxz46zko5" transform="rotate(-90) translate(0,0)" opacity="0.505"><circle id="eauwxz46zko6" r="20" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="none" stroke-width="1"/><circle id="eauwxz46zko7" r="19.500000" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="rgb(255,255,255)" stroke-width="1"/></g></g><g id="eauwxz46zko8_to" transform="translate(-62,541)"><g id="eauwxz46zko8" transform="rotate(-90) translate(0,0)" opacity="0.505"><circle id="eauwxz46zko9" r="20" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="none" stroke-width="1"/><circle id="eauwxz46zko10" r="19.500000" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="rgb(255,255,255)" stroke-width="1"/></g></g><g id="eauwxz46zko11_to" transform="translate(-107,541)"><g id="eauwxz46zko11" transform="rotate(-90) translate(0,0)" opacity="0.505"><circle id="eauwxz46zko12" r="20" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="none" stroke-width="1"/><circle id="eauwxz46zko13" r="19.500000" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="rgb(255,255,255)" stroke-width="1"/></g></g><g id="eauwxz46zko14_to" transform="translate(-134,541)"><g id="eauwxz46zko14" transform="rotate(-90) translate(0,0)" opacity="0.505"><circle id="eauwxz46zko15" r="20" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="none" stroke-width="1"/><circle id="eauwxz46zko16" r="19.500000" transform="matrix(1 0 0 1 508.30000000000001 194.90000000000001)" fill="none" stroke="rgb(255,255,255)" stroke-width="1"/></g></g><g id="eauwxz46zko17_to" transform="translate(113,501)"><g id="eauwxz46zko17" transform="translate(0,0)" opacity="0.505"><circle id="eauwxz46zko18" r="20" transform="matrix(1 0 0 1 194.90000000000001 -468.30000000000001)" fill="none" stroke="none" stroke-width="1"/><circle id="eauwxz46zko19" r="19.500000" transform="matrix(1 0 0 1 194.90000000000001 -468.30000000000001)" fill="none" stroke="rgb(255,255,255)" stroke-width="1"/></g></g></svg>
           </section>
            <section class="topNews" style="padding-top:40px;">
                <div class="" id="down"></div>
                <div class="wrapper">
                    <div class="newspageWrapper">

                            <?php
                                $inc = 1;
                                $the_query = new WP_Query();
                                $the_query->query("posts_per_page=3");
                                if ($the_query->have_posts()) : ?>
                            
                                <?php while($the_query->have_posts()) : $the_query->the_post();
                                if($inc == 1){ ?>

                                    <?php $backgroundImg = wp_get_attachment_image_src( get_post_thumbnail_id($post->ID), 'full' );?>

                                    <a href="<?php the_permalink() ?>" class="newsItem featured reveal">
                                        <div class="bg" style="background-image: url('<?php echo $backgroundImg[0]; ?>')"></div>
                                        <span class="featuredPost">Featured Article</span>
                                        <div class="textWrapper">
                                            <h3><?php the_title(); ?></h3>
                                        
                                            <div class="date">
                                                <?php $date = get_the_date('n'); 
                                                    if($date <= 9) {
                                                        $fullMonth = '0'.$date;
                                                    } else {
                                                        $fullMonth = $date;
                                                    }
                                                    $fullDate = get_the_date('M Y');
                                                ?>


                                                <span class="date"><?php echo $fullDate; ?></span>
                                            </div>
                                            <div class="excerpt"><?php the_excerpt(); ?></div>
                                            <span class="button whiteOutline arrow">Read</span>  

                                        </div>
                                    </a>


                                <?php } else { ?>

                                <a href="<?php the_permalink() ?>" class="newsItem reveal">
                            
                                    <div class="imageWrapper">
                                        <?php the_post_thumbnail('newsSquare'); ?>
                                    </div>
                                    <div class="textWrapper">
                                        <div class="topWrap">
                                            <h3><span class="underline"><?php the_title(); ?></span></h3>

                                            <!-- by default, the 'n' in date only get a single number
                                            for 0-9 months of the year, eg. January is 1, not 01.
                                            This statement below checks if the number is between 1 and 9,
                                            and adds a 0 in front if it is. Otherwise, it just gets the number
                                            for October onwards as this will be 10 or above. -->

                                            <?php $date = get_the_date('n'); 
                                                if($date <= 9) {
                                                    $fullMonth = '0'.$date;
                                                } else {
                                                    $fullMonth = $date;
                                                }
                                                $fullDate = get_the_date('M Y');
                                                ?>


                                            <span class="date"><?php echo $fullDate; ?></span>
                                        </div>

                                        <div class="excerpt"><?php the_excerpt(); ?></div>
                                        

                                        <div class="readWrapper">
                                            <span class="button blueOutline arrow">Read</span>  
                                            <div class="author">
                                                By <?php echo get_the_author_meta( 'first_name' ); ?> <?php echo get_the_author_meta( 'last_name' ); ?>
                                                <!-- Get author image - custom field -->
                                                <?php
                                                $author_id = get_the_author_meta('ID');
                                                $author_badge = get_field('profile_image', 'user_'. $author_id );
                                                ?>
                                                <img height="42" width="42" src="<?php echo $author_badge['url']; ?>" alt="<?php echo $author_badge['alt']; ?>" />
                                            </div>
                                        </div>
                                    </div>
                                        
                                </a>

                                <?php } 
                                $inc++; //counter
                                endwhile; ?> 

                                <?php endif; 
                            wp_reset_postdata();
                            ?>


                    </div>
                </div>
            </section>

            <section class="thinkers simpleActiveTwo">
                <div class="wrapper">
                    <div class="titleWrapper">
                        <h2>Thinkers</h2>
                        <p>External articles we think our readers will find interesting.</p>
                    </div>
                    <?php include 'thinkers-loop.php'; ?>
                    <p class="bottomP">* Disclaimer: This content is derived from external sources and we do not claim ownership. We are not affiliated with the providers of this content.</p>

            </section>

            <section class="moreNews" id="down">
                <div class="wrapper">
                    <div class="newspageWrapper">

                            
                    <?php
                                $incTwo = 1;
                                $the_queryTwo = new WP_Query();
                                $the_queryTwo->query("posts_per_page=5");
                                if ($the_queryTwo->have_posts()) : ?>
                            
                                <?php while($the_queryTwo->have_posts()) : $the_queryTwo->the_post();
                                if($incTwo == 1){ ?>

                                <?php } elseif($incTwo == 2) { ?>

                                <?php } elseif($incTwo == 3) { ?>

                                <?php } else { ?>

                                <a href="<?php the_permalink() ?>" class="newsItem reveal">
                            
                                    <div class="imageWrapper">
                                        <?php the_post_thumbnail('newsSquare'); ?>
                                    </div>
                                    <div class="textWrapper">
                                        <div class="topWrap">
                                            <h3><span class="underline"><?php the_title(); ?></span></h3>

                                            <!-- by default, the 'n' in date only get a single number
                                            for 0-9 months of the year, eg. January is 1, not 01.
                                            This statement below checks if the number is between 1 and 9,
                                            and adds a 0 in front if it is. Otherwise, it just gets the number
                                            for October onwards as this will be 10 or above. -->

                                            <?php $date = get_the_date('n'); 
                                                if($date <= 9) {
                                                    $fullMonth = '0'.$date;
                                                } else {
                                                    $fullMonth = $date;
                                                }
                                                $fullDate = get_the_date('M Y');
                                                ?>


                                            <span class="date"><?php echo $fullDate; ?></span>
                                        </div>                                        

                                        <div class="readWrapper">
                                            <span class="button blueOutline arrow">Read</span>  
                                            <div class="author">
                                                By <?php echo get_the_author_meta( 'first_name' ); ?> <?php echo get_the_author_meta( 'last_name' ); ?>
                                                <!-- Get author image - custom field -->
                                                <?php
                                                $author_id = get_the_author_meta('ID');
                                                $author_badge = get_field('profile_image', 'user_'. $author_id );
                                                ?>
                                                <img height="42" width="42" src="<?php echo $author_badge['url']; ?>" alt="<?php echo $author_badge['alt']; ?>" />
                                            </div>
                                        </div>
                                    </div>
                                        
                                </a>

                                <?php } 
                                $incTwo++; //counter
                                endwhile; ?> 

                                <?php endif; 
                            wp_reset_postdata();
                            ?>    

                    </div>
                </div>
            </section>

        </main>
        <?php get_footer(); ?>
    </body>
</html>
